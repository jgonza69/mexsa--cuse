<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MEXSA @ Syracuse — Eventos</title>
  <meta name="description" content="Calendario de próximos eventos, talleres y recursos educativos de MEXSA @ Syracuse." />
  <link rel="stylesheet" href="styles.css" />
  <link rel="icon" href="images/mexsa1.png" />
</head>
<body>
  <!-- Header -->
  <header class="site-header">
    <div class="container header-inner">
      <a class="brand" href="index.html">MEXSA<span class="pill">SYR</span></a>
      <nav id="nav" class="nav">
        <a href="index.html">Inicio</a>
        <a href="events.html" aria-current="page">Eventos</a>
        <a href="about.html">Nosotros</a>
        <a href="join.html" class="cta">Únete</a>
      </nav>
      <button id="menuBtn" class="menu-btn" aria-expanded="false" aria-controls="nav" aria-label="Toggle menu">☰</button>
    </div>
  </header>

  <!-- Hero -->
  <section class="hero hero--stadium" style="background-image:
    linear-gradient(180deg, rgba(10,15,10,.35), rgba(10,15,10,.85)),
    url('images/aquiestamos1.jpg');">
    <div class="hero__overlay">
      <div class="container hero__content">
        <h1 class="hero__title">Calendario & Recursos</h1>
        <p class="hero__subtitle">Talleres, fiestas, educación y solidaridad en el campus.</p>
      </div>
    </div>
  </section>

  <!-- Próximos eventos (dynamic from Google Sheet) -->
  <section class="section">
    <div class="container">
      <div class="section__head">
        <h2>Próximos eventos</h2>
      </div>

      <!-- REPLACED old hard-coded cards with dynamic feed -->
      <!-- data-limit="0" = sin límite (muestra todos); ajusta si quieres -->
      <div data-events-feed data-limit="0" data-rotate-ms="5000"></div>
      <!-- END dynamic feed -->
    </div>
  </section>

  <!-- Month grids / list style -->
  <section class="strip">
    <div class="container">
      <div class="section__head">
        <h2>Calendario del semestre</h2>
      </div>

      <div class="grid" style="grid-template-columns: 1fr 1fr; gap:1rem;">
        <article class="card">
          <div class="card__body">
            <h3 class="card__title">Septiembre</h3>
            <ul class="bullets">
              <li>15 — LHM Fair & Apertura (Student Center) · NALFO Night</li>
              <li>16 — <strong>Taller de Tortillas</strong> (HOL 107, 7–8 PM)</li>
              <li>18 — LHS GBM: Charlas y Horchata</li>
              <li>20 — Torneo de Fútbol (voluntariado + ventas)</li>
              <li>22 — Café con Leche (La Lucha) · 23 — Noche de Cumbia + Mixed Tapes</li>
              <li>24 — ALPFA SU: charla con chef</li>
            </ul>
          </div>
        </article>

        <article class="card">
          <div class="card__body">
            <h3 class="card__title">Octubre</h3>
            <ul class="bullets">
              <li>1 — Panel SALSA: Latinos in Syracuse</li>
              <li>7 — <strong>Mexican Crochet Night</strong> (con CFTC)</li>
              <li>8 — Música outside Schine · Dance Masterclass</li>
              <li>9 — <strong>Café con Leche</strong> — Inmigración</li>
              <li>11 — <strong>Watch Party: México vs Colombia</strong> (Schine Atrium, 9 PM)</li>
              <li>15 — Panel de medios + Música outside Schine</li>
              <li>16 — Café con Leche (HASA) · 22 — Música outside Schine</li>
              <li>26 — Calentón Music</li>
            </ul>
          </div>
        </article>
      </div>
    </div>
  </section>

  <!-- Educación: Día de los Muertos -->
  <section class="section section--dark" id="diadelosmuertos">
    <div class="container">
      <div class="section__head">
        <h2>Día de los Muertos — Serie educativa</h2>
      </div>
      <div class="newsgrid">
        <article class="card">
          <img class="card__img" src="images/diadelosmuertos1.jpeg" alt="¿Qué es Día de los Muertos?">
          <div class="card__body">
            <h3 class="card__title">¿Qué es?</h3>
            <p class="card__excerpt">Tradición para honrar la vida de quienes ya partieron. Ofrendas, memoria y comunidad.</p>
          </div>
        </article>
        <article class="card">
          <img class="card__img" src="images/diadelosmuertos2.jpeg" alt="Símbolos del Día de los Muertos">
          <div class="card__body">
            <h3 class="card__title">Símbolos</h3>
            <p class="card__excerpt">Cempasúchil, pan de muerto, calaveras de azúcar y velas.</p>
          </div>
        </article>
        <article class="card">
          <img class="card__img" src="images/aquiestamos1.jpg" alt="Origen del Día de los Muertos">
          <div class="card__body">
            <h3 class="card__title">Origen</h3>
            <p class="card__excerpt">Raíces mesoamericanas + tradiciones católicas; la mezcla que conocemos hoy.</p>
          </div>
        </article>
        <article class="card">
          <img class="card__img" src="images/tradiciones1.jpeg" alt="Tradiciones del Día de los Muertos">
          <div class="card__body">
            <h3 class="card__title">Tradiciones</h3>
            <p class="card__excerpt">Ofrendas con fotos y comida, visitas al panteón y arte popular.</p>
          </div>
        </article>
      </div>
    </div>
  </section>

  <!-- Know Your Rights + Alligator Alcatraz + Reading List -->
  <section class="section" id="recursos">
    <div class="container">
      <div class="section__head">
        <h2>Recursos & Solidaridad</h2>
      </div>

      <div class="grid" style="grid-template-columns:2fr 1fr; gap:1rem;">
        <article class="card" id="kyrights">
          <img class="card__img" src="images/mexsa2.png" alt="Conoce tus derechos">
          <div class="card__body">
            <h3 class="card__title">Conoce tus derechos (bilingüe)</h3>
            <p class="card__excerpt">Qué hacer si tienes contacto con ICE o la policía. Mantén la calma; no firmes nada sin representación legal.</p>
            <div class="grid" style="grid-template-columns:1fr 1fr;gap:.5rem;">
              <a class="btn secondary" href="#" onclick="alert('PDF en preparación'); return false;">Descargar (EN)</a>
              <a class="btn secondary" href="#" onclick="alert('PDF en preparación'); return false;">Descargar (ES)</a>
            </div>
          </div>
        </article>

        <article class="card">
          <img class="card__img" src="images/aquiestamos1.jpg" alt="Alligator Alcatraz">
          <div class="card__body">
            <h3 class="card__title">Alligator Alcatraz</h3>
            <p class="card__excerpt">Infórmate sobre el centro de detención en los Everglades y cómo ayudar.</p>
            <a class="btn" target="_blank" rel="noopener" href="https://immigrantjustice.org/ways-to-help/">Translate · Donate · Show up</a>
          </div>
        </article>
      </div>

      <div class="card" id="lecturas" style="margin-top:1rem;">
        <div class="card__body">
          <h3 class="card__title">Lecturas recomendadas</h3>
          <p class="muted">Construye tu lista de lectura sobre historia, arte y migración.</p>
          <ul class="bullets">
            <li>Historia de México para principiantes (intro)</li>
            <li>Arte mexicano contemporáneo (catálogo breve)</li>
            <li>Migración y derechos humanos (lecturas base)</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="container footergrid">
      <div>
        <div class="brand brand--footer">MEXSA<span class="pill">SYR</span></div>
        <p class="muted">Cultura, comunidad y orgullo mexicano en Syracuse University.</p>
      </div>
      <nav class="footernav">
        <a href="index.html">Inicio</a>
        <a href="events.html" aria-current="page">Eventos</a>
        <a href="about.html">Nosotros</a>
        <a href="join.html">Únete</a>
      </nav>
      <div class="footercta">
        <p class="muted">¿Preguntas? <a href="mailto:mexsacuse@gmail.com">mexsacuse@gmail.com</a></p>
        <a class="btn" href="join.html">Hazte miembro</a>
      </div>
    </div>
    <div class="container legal">
      <p>© <span id="year"></span> MEXSA @ Syracuse • All rights reserved.</p>
    </div>
  </footer>

  <script src="main.js"></script>
  <script>
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>

  <!-- === Events feed (Google Sheet) === -->
  <script>
    // Your published Apps Script Web App endpoint:
    window.EVENTS_API_URL = 'https://script.google.com/macros/s/AKfycbwwH-QNELsaWFbyMexOt4abYJIXTtCd6EyerkzpJoMcYFGjOhxgLkwTPULZLwAZMINn/exec';
  </script>
  <script>
  (function () {
    const API = window.EVENTS_API_URL;
    const containers = Array.from(document.querySelectorAll('[data-events-feed]'));
    if (!API || !containers.length) return;

    const el = (tag, attrs = {}, kids = []) => {
      const n = document.createElement(tag);
      Object.entries(attrs).forEach(([k, v]) => {
        if (k === 'class') n.className = v;
        else if (k === 'html') n.innerHTML = v;
        else n.setAttribute(k, v);
      });
      kids.forEach(k => n.appendChild(typeof k === 'string' ? document.createTextNode(k) : k));
      return n;
    };

    // Single-image view with auto-rotate if multiple
    const renderImages = (urls, rotateMs = 5000) => {
      if (!urls || !urls.length) return null;

      const wrap = el('div', { class: 'events-rotator' });
      Object.assign(wrap.style, { position: 'relative' });

      const img = el('img', { alt: '', loading: 'lazy' });
      Object.assign(img.style, { width: '100%', borderRadius: '12px', display: 'block' });
      wrap.appendChild(img);

      let idx = urls.length > 1 ? Math.floor(Math.random() * urls.length) : 0;
      let timer = null;

      const show = (i) => {
        idx = (i + urls.length) % urls.length;
        img.src = urls[idx];
      };

      const start = () => {
        if (timer || urls.length < 2) return;
        timer = setInterval(() => show(idx + 1), rotateMs);
      };
      const stop = () => { if (timer) { clearInterval(timer); timer = null; } };

      document.addEventListener('visibilitychange', () => {
        if (document.hidden) stop(); else start();
      });

      wrap.addEventListener('click', () => { if (urls.length > 1) show(idx + 1); });
      wrap.addEventListener('mouseenter', stop);
      wrap.addEventListener('mouseleave', start);

      show(idx);
      start();
      return wrap;
    };

    const renderCard = (item, rotateMs) => {
      const card = el('article', { class: 'events-card' });
      Object.assign(card.style, {
        borderRadius: '16px', padding: '20px',
        background: 'var(--card-bg, #0f1713)',
        border: '1px solid rgba(255,255,255,0.06)'
      });

      const imgs = renderImages(item.images, rotateMs);
      if (imgs) card.appendChild(imgs);

      const h3 = el('h3', {}, [item.title]);
      Object.assign(h3.style, { margin: '14px 0 6px', fontSize: '1.25rem' });
      card.appendChild(h3);

      if (item.description) {
        const p = el('p', {}, [item.description]);
        Object.assign(p.style, { opacity: '0.85', lineHeight: '1.5' });
        card.appendChild(p);
      }

      const footer = el('div');
      Object.assign(footer.style, { display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginTop: '12px' });

      if (item.link) {
        const a = el('a', { href: item.link }, ['Ver más →']);
        Object.assign(a.style, { textDecoration: 'none', fontWeight: '600', opacity: '0.95' });
        footer.appendChild(a);
      }
      if (item.date) { const t = el('time', {}, [item.date]); t.style.opacity = '0.6'; footer.appendChild(t); }
      if (footer.childNodes.length) card.appendChild(footer);
      return card;
    };

    const hydrate = (rows) => {
      containers.forEach(c => {
        const limit = parseInt(c.getAttribute('data-limit') || '0', 10);
        const rotateMs = parseInt(c.getAttribute('data-rotate-ms') || '5000', 10);
        const items = limit ? rows.slice(0, limit) : rows;
        c.innerHTML = '';
        const grid = el('div');
        Object.assign(grid.style, { display: 'grid', gap: '16px', gridTemplateColumns: 'repeat(auto-fit, minmax(260px, 1fr))' });
        items.forEach(x => grid.appendChild(renderCard(x, rotateMs)));
        c.appendChild(grid);
      });
    };

    (async () => {
      try {
        const res = await fetch(API + (API.includes('?') ? '&' : '?') + '_=' + Date.now(), { cache: 'no-store' });
        const data = await res.json();
        const clean = (Array.isArray(data) ? data : []).map(x => ({
          ...x,
          images: (x.images || []).map(s => String(s).trim()).filter(Boolean)
        }));
        hydrate(clean);
      } catch (e) {
        console.error('Events feed error:', e);
      }
    })();
  })();
  </script>
  <!-- === /Events feed === -->
</body>
</html>






