<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MEXSA @ Syracuse — Inicio</title>
  <meta name="description" content="Cultura, comunidad y orgullo mexicano en Syracuse University. Talleres, eventos, educación y solidaridad.">
  <link rel="stylesheet" href="styles.css" />
  <link rel="icon" href="images/mexsa1.png" />
</head>
<body>
  <!-- Header -->
  <header class="site-header">
    <div class="container header-inner">
      <a class="brand" href="index.html">
        MEXSA<span class="pill">SYR</span>
      </a>
      <nav id="nav" class="nav">
        <a href="index.html" aria-current="page">Inicio</a>
        <a href="events.html">Eventos</a>
        <a href="about.html">Nosotros</a>
        <a href="join.html" class="cta">Únete</a>
      </nav>
      <button id="menuBtn" class="menu-btn" aria-expanded="false" aria-controls="nav" aria-label="Toggle menu">☰</button>
    </div>
  </header>

  <!-- Hero -->
  <section class="hero hero--stadium" style="background-image:
    linear-gradient(180deg, rgba(10,15,10,.35), rgba(10,15,10,.85)),
    url('images/aquiestamos1.jpg');">
    <div class="hero__overlay">
      <div class="container hero__content">
        <p class="pill" style="margin-bottom:.6rem;">Bienvenidos</p>
        <h1 class="hero__title">Mexican Student Association @ Syracuse</h1>
        <p class="hero__subtitle">Comunidad, cultura y acción — talleres, educación y eventos para todxs.</p>
        <div class="actions">
          <a class="btn" href="join.html">Únete hoy</a>
          <a class="btn secondary" href="events.html">Ver calendario</a>
        </div>
      </div>
    </div>
  </section>

  <!-- Quick highlights -->
  <section class="strip">
    <div class="container">
      <div class="section__head"><h2>Noticias rápidas</h2></div>
      <div class="newsgrid">
        <article class="card">
          <img class="card__img" src="images/mexsa2.png" alt="Conoce a la mesa directiva">
          <div class="card__body">
            <h3 class="card__title">Conoce a la Mesa Directiva</h3>
            <p class="card__excerpt">Presentaciones del E-Board 24-25 — quiénes somos y en qué trabajamos.</p>
            <a class="inline" href="about.html#eboard">Ver equipo →</a>
          </div>
        </article>
        <article class="card">
          <img class="card__img" src="images/tortilla.png" alt="Taller de tortillas">
          <div class="card__body">
            <h3 class="card__title">Taller de Tortillas</h3>
            <p class="card__excerpt">Aprende técnicas tradicionales y el porqué cultural detrás del maíz.</p>
            <a class="inline" href="events.html#tortillas">Detalles →</a>
          </div>
        </article>
        <article class="card">
          <img class="card__img" src="images/recursos1.png" alt="Activismo y comunidad">
          <div class="card__body">
            <h3 class="card__title">Solidaridad & Recursos</h3>
            <p class="card__excerpt">Conoce tus derechos, recursos locales y formas de involucrarte.</p>
            <a class="inline" href="events.html#recursos">Ver recursos →</a>
          </div>
        </article>
        <article class="card">
          <img class="card__img" src="images/aquiestamos1.jpg" alt="MEXSA puntitos">
          <div class="card__body">
            <h3 class="card__title">MEXSA puntitos</h3>
            <p class="card__excerpt">Datos, tips y mini-posts culturales cada semana.</p>
            <a class="inline" href="events.html#educacion">Explorar →</a>
          </div>
        </article>
      </div>
    </div>
  </section>

  <!-- Próximos eventos (dynamic from Google Sheet) -->
  <section class="section">
    <div class="container">
      <div class="section__head">
        <h2>Próximos eventos destacados</h2>
        <a class="link" href="events.html">Ver todo el calendario →</a>
      </div>

      <!-- Dynamic feed: shows 3 at a time, rotates pages if there are more, per-event images rotate -->
      <div data-events-feed
           data-limit="3"
           data-rotate-pages-ms="9000"
           data-image-rotate-ms="5000"></div>
      <!-- END dynamic feed -->
    </div>
  </section>

  <!-- Educación -->
  <section class="section section--dark" id="educacion">
    <div class="container">
      <div class="section__head"><h2>Educación & Comunidad</h2></div>
      <div class="newsgrid">
        <article class="card">
          <img class="card__img" src="images/diadelosmuertos1.jpeg" alt="Qué es Día de los Muertos">
          <div class="card__body">
            <h3 class="card__title">¿Qué es el Día de los Muertos?</h3>
            <p class="card__excerpt">Tradición para honrar y celebrar la vida de quienes ya no están. Ofrendas, cempasúchil y memoria viva.</p>
            <a class="inline" href="events.html#diadelosmuertos">Leer más →</a>
          </div>
        </article>

        <article class="card">
          <img class="card__img" src="images/Kyr1.png" alt="Conoce tus derechos">
          <div class="card__body">
            <h3 class="card__title">Conoce tus derechos</h3>
            <p class="card__excerpt">Recursos bilingües sobre contacto con ICE y la policía. Mantén la calma y pide abogadx.</p>
            <a class="inline" href="events.html#kyrights">Descargar carteles →</a>
          </div>
        </article>

        <article class="card">
          <img class="card__img" src="images/aquiestamos1.jpg" alt="Alligator Alcatraz">
          <div class="card__body">
            <h3 class="card__title">Alligator Alcatraz</h3>
            <p class="card__excerpt">Información sobre el centro de detención en los Everglades y formas de ayudar.</p>
            <a class="inline" href="https://immigrantjustice.org/ways-to-help/" target="_blank" rel="noopener">Actúa ahora →</a>
          </div>
        </article>

        <article class="card">
          <img class="card__img" src="images/lectura1.jpeg" alt="Lecturas recomendadas">
          <div class="card__body">
            <h3 class="card__title">Lecturas recomendadas</h3>
            <p class="card__excerpt">Historia, arte y migración para empezar tu propio club de lectura.</p>
            <a class="inline" href="events.html#lecturas">Ver lista →</a>
          </div>
        </article>
      </div>
    </div>
  </section>

  <!-- Members (auto from /images) -->
  <section class="section">
    <div class="container">
      <div class="section__head"><h2>Nuestro equipo</h2></div>
      <div id="members" class="gallery-grid"></div>
    </div>
  </section>

  <!-- Únete + Social -->
  <section class="section">
    <div class="container">
      <div class="section__head"><h2>Únete a la comunidad</h2></div>
      <div class="grid" style="grid-template-columns:2fr 1fr; gap:1rem;">
        <article class="card">
          <div class="card__body">
            <h3 class="card__title">Recibe noticias y eventos</h3>
            <p class="card__excerpt">Inscríbete para enterarte de talleres, fiestas, colaboraciones y oportunidades.</p>
            <a class="btn" href="join.html">Registrarme</a>
          </div>
        </article>
        <article class="card">
          <div class="card__body">
            <h3 class="card__title">Síguenos</h3>
            <p class="muted">Instagram, GroupMe, LinkedIn</p>
            <div class="grid" style="grid-template-columns:repeat(3,1fr);">
              <a class="social-link"
                 href="https://www.instagram.com/mexsa.cuse/"
                 target="_blank" rel="noopener"
                 aria-label="Instagram de MEXSA">
                <img class="card__img" style="height:90px"
                     src="images/iglogo.jpeg" alt="Instagram" loading="lazy" decoding="async">
              </a>

              <a class="social-link"
                 href="https://groupme.com/join_group/108355187/lu7G3Xc1"
                 target="_blank" rel="noopener"
                 aria-label="Únete al GroupMe de MEXSA">
                <img class="card__img" style="height:90px"
                     src="images/groupme.jpeg" alt="GroupMe" loading="lazy" decoding="async">
              </a>

              <a class="social-link"
                 href="https://www.linkedin.com/in/mexsasu"
                 target="_blank" rel="noopener"
                 aria-label="LinkedIn de MEXSA SU">
                <img class="card__img" style="height:90px"
                     src="images/linkedln.png" alt="LinkedIn" loading="lazy" decoding="async">
              </a>
            </div>
          </div>
        </article>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="container footergrid">
      <div>
        <div class="brand brand--footer">MEXSA<span class="pill">SYR</span></div>
        <p class="muted">Cultura, comunidad y orgullo mexicano en Syracuse University.</p>
      </div>
      <nav class="footernav">
        <a href="index.html" aria-current="page">Inicio</a>
        <a href="events.html">Eventos</a>
        <a href="about.html">Nosotros</a>
        <a href="join.html">Únete</a>
      </nav>
      <div class="footercta">
        <p class="muted">¿Preguntas? <a href="mailto:mexsacuse@gmail.com">mexsacuse@gmail.com</a></p>
        <a class="btn" href="join.html">Hazte miembro</a>
      </div>
    </div>
    <div class="container legal">
      <p>© <span id="year"></span> MEXSA @ Syracuse • All rights reserved.</p>
    </div>
  </footer>

  <script src="main.js"></script>

  <!-- Inline: auto-render members from your /images filenames -->
  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    // One card per member. Uses the FIRST photo for each person.
    const members = [
      { name: "Carlos Silva", file: "carlos1.jpg" },
      { name: "Cesar Barrera",  file: "cesar1.jpg" },
      { name: "Danna Ochoa Cardenas",  file: "danna2.png" },
      { name: "Emilia Monroy Hortos",    file: "emi2.png" },
      { name: "Gaby Ramirez",   file: "gaby1.jpg" },
      { name: "Jared Gonzalez",  file: "jared1.jpg" },
      { name: "Jesús Garcia", file: "jesusg1.png" },
      { name: "Jesús Tiburcio Zane", file: "jesust1.png" },
      { name: "María Ruelas",  file: "maria1.jpg" },
      { name: "Valeria Martinez Guiterrez",   file: "vale1.jpg" },
      { name: "Vanessa Sanchez",   file: "vane1.png" },
    ];

    const mount = document.getElementById("members");
    if (mount) {
      members.forEach(({name, file}) => {
        const fig = document.createElement("figure");
        fig.className = "member-card";
        const img = document.createElement("img");
        img.loading = "lazy";
        img.src = `images/${file}`;
        img.alt = name;
        const cap = document.createElement("figcaption");
        cap.textContent = name;
        fig.appendChild(img);
        fig.appendChild(cap);
        mount.appendChild(fig);
      });
    }
  </script>

  <!-- === Events feed (Google Sheet) === -->
  <script>
    // ############## CONFIG ##############
    // Your published Google Apps Script Web App endpoint:
    window.EVENTS_API_URL = 'https://script.google.com/macros/s/AKfycbwwH-QNELsaWFbyMexOt4abYJIXTtCd6EyerkzpJoMcYFGjOhxgLkwTPULZLwAZMINn/exec';
    // ############ END CONFIG ############
  </script>
  <script>
  (() => {
    const API = window.EVENTS_API_URL;
    const mounts = Array.from(document.querySelectorAll('[data-events-feed]'));
    if (!API || !mounts.length) return;

    // helper
    const el = (t, a={}, kids=[]) => {
      const n = document.createElement(t);
      for (const [k,v] of Object.entries(a)) {
        if (k === 'class') n.className = v;
        else if (k === 'html') n.innerHTML = v;
        else n.setAttribute(k, v);
      }
      kids.forEach(k => n.appendChild(typeof k === 'string' ? document.createTextNode(k) : k));
      return n;
    };

    // image rotator (with cache-bust + fallback)
    const imageRotator = (urls, rotateMs=5000) => {
      const wrap = el('div', { class: 'events-card__media' });
      const img = el('img', { alt: '', loading: 'lazy' });
      Object.assign(img.style, {
        width:'100%', height:'160px', objectFit:'cover',
        borderRadius:'12px', background:'#0f1a12'
      });

      const setSrc = (u) => {
        const clean = String(u||'').trim();
        const busted = clean ? clean + (clean.includes('?')?'&':'?') + 'v=' + Date.now() : '';
        img.onerror = () => { img.onerror = null; img.src = 'images/mexsa1.png'; };
        img.src = busted || 'images/mexsa1.png';
      };

      let i = 0;
      if (!urls || !urls.length) urls = ['images/mexsa1.png'];
      setSrc(urls[i]);
      wrap.appendChild(img);

      if (urls.length > 1 && rotateMs > 0) {
        setInterval(() => { i = (i + 1) % urls.length; setSrc(urls[i]); }, rotateMs);
      }
      return wrap;
    };

    // event card
    const card = (e, imageMs) => {
      const media = imageRotator(e.images, imageMs);
      const body  = el('div', { class:'card__body' }, [
        el('h3', { class:'card__title' }, [e.title || 'Evento']),
        el('p',  { class:'muted' },      [e.whenText || e.when || '']),
        el('p',  { class:'card__excerpt'},[e.description || '']),
        e.link ? el('a', { class:'btn secondary', href: e.link, target:'_blank', rel:'noopener' }, ['Más info']) : el('span')
      ]);
      const wrap = el('article', { class:'card events-card' }, [media, body]);
      return wrap;
    };

    // fetch + normalize + filter + sort
    const fetchEvents = async () => {
      const res = await fetch(API + (API.includes('?') ? '&' : '?') + '_=' + Date.now(), { cache:'no-store' });
      const data = await res.json();

      const rows = (Array.isArray(data) ? data : []).map(x => {
        const images = String(x.images || x.image || '')
          .split(',')
          .map(s => s.trim())
          .filter(Boolean);

        const status = String(x.status || 'publish').toLowerCase();

        const rawDate = String(x.date || x.when || '').trim();
        const dt = rawDate ? new Date(rawDate) : null;

        const whenText = rawDate || '';

        return {
          title: x.title || x.name || '',
          when: rawDate,
          whenText,
          description: x.description || x.desc || '',
          link: x.link || x.url || '',
          images,
          status,
          _dt: isFinite(dt?.getTime?.()) ? dt : null
        };
      });

      // only published + auto-hide past dates
      const today = new Date(); today.setHours(0,0,0,0);
      const visible = rows
        .filter(r => !['hide','hidden','draft','no'].includes(r.status))
        .filter(r => !r._dt || r._dt >= today);

      // soonest first (null dates last)
      visible.sort((a,b) => {
        const A = a._dt ? a._dt.getTime() : Infinity;
        const B = b._dt ? b._dt.getTime() : Infinity;
        return A - B;
      });

      return visible;
    };

    const renderInto = (mount, items) => {
      const limitAttr = Number(mount.getAttribute('data-limit') || '0'); // 0 = no limit
      const imageMs   = Number(mount.getAttribute('data-image-rotate-ms') || '5000');
      const pageMs    = Number(mount.getAttribute('data-rotate-pages-ms') || '0'); // 0 = no rotation
      const grid = el('div', { class:'newsgrid' });
      mount.innerHTML = '';
      mount.appendChild(grid);

      if (!limitAttr || items.length <= limitAttr || pageMs <= 0) {
        items.forEach(ev => grid.appendChild(card(ev, imageMs)));
        return;
      }

      // paginate into pages of `limitAttr` and auto-rotate pages
      const pages = [];
      for (let i=0; i<items.length; i+=limitAttr) pages.push(items.slice(i, i+limitAttr));
      let p = 0;

      const showPage = (idx) => {
        p = (idx + pages.length) % pages.length;
        grid.innerHTML = '';
        pages[p].forEach(ev => grid.appendChild(card(ev, imageMs)));
      };

      showPage(0);
      setInterval(() => showPage(p + 1), pageMs);
    };

    // boot
    (async () => {
      try {
        const events = await fetchEvents();
        mounts.forEach(m => renderInto(m, events));
      } catch(e) {
        console.error('Events feed error:', e);
      }
    })();
  })();
  </script>
  <!-- === /Events feed === -->
</body>
</html>





